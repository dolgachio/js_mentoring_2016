{"version":3,"sources":["node_modules/browser-pack/_prelude.js","vendor/modules/dispatcher.factory.js","vendor/modules/main.factory.js","vendor/modules/module.factory.js","vendor/modules/router.js","vendor/modules/store.factory.js","vendor/modules/view.factory.js","vendor/root.js","vendor/utils/xhr.js"],"names":[],"mappings":"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","file":"trifon.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict';\r\n\r\nmodule.exports = dispatcherFactory;\r\n\r\nfunction dispatcherFactory() {\r\n    let dispatcher;\r\n\r\n        dispatcher = _Dispatcher();\r\n\r\n        function createAction(type) {\r\n            if (!type) {\r\n                throw new Error('Please, provide action\\'s type.');\r\n            } else {\r\n                return function (payload) {\r\n                    return dispatcher.dispatch({ type: type, payload: payload });\r\n                }\r\n            }\r\n        }\r\n\r\n        function createSubscriber(store) {\r\n            return dispatcher.register(store);\r\n        }\r\n\r\n        return {\r\n            createAction: createAction,\r\n            createSubscriber: createSubscriber\r\n        };\r\n}\r\n\r\nfunction _Dispatcher() {\r\n    return {\r\n        _stores: [],\r\n\r\n        register: function (store) {\r\n            if (!store || !store.update) {\r\n                throw new Error('You should provide a store that has an `update` method.');\r\n            } else {\r\n                var consumers = [];\r\n                var change = function () {\r\n                    consumers.forEach(function (l) {\r\n                        l(store);\r\n                    });\r\n                };\r\n                var subscribe = function (consumer, noInit) {\r\n                    consumers.push(consumer);\r\n                    !noInit ? consumer(store) : null;\r\n                };\r\n\r\n                this._stores.push({store: store, change: change});\r\n                return subscribe;\r\n            }\r\n        },\r\n\r\n        dispatch: function (action) {\r\n            if (this._stores.length > 0) {\r\n                this._stores.forEach(function (entry) {\r\n                    entry.store.update(action, entry.change);\r\n                });\r\n            }\r\n        }\r\n    }\r\n}\r\n","'use strict';\r\n\r\nvar moduleFactory = require('./module.factory.js');\r\nvar createDispatcher = require('./dispatcher.factory.js');\r\nvar createStore = require('./store.factory.js');\r\nvar createView = require('./view.factory.js');\r\nvar router = require('./router.js');\r\n\r\n\r\nfunction factory() {\r\n\r\n    return {\r\n        module: moduleFactory,\r\n        dispatcher: createDispatcher,\r\n        store: createStore,\r\n        view: createView,\r\n        router: router\r\n    };\r\n}\r\n\r\nmodule.exports = factory;\r\n\r\n","'use strict';\r\n\r\nclass ModuleFactory {\r\n    constructor(name) {\r\n        if(!name || typeof name !== 'string') {\r\n            throw new Error('Cannot create module without a name');\r\n        } else {\r\n            this.name = name;\r\n            this._dispatcher =  null\r\n        }\r\n    }\r\n\r\n    setDispatcher(dispatcher) {\r\n        if(typeof dispatcher === 'object' && dispatcher.hasOwnProperty) {\r\n            return this._dispatcher = dispatcher;\r\n        } else {\r\n            throw new Error('Cannot set dispatcher');\r\n        }\r\n    }\r\n}\r\n\r\n\r\nmodule.exports = ModuleFactory;","'use strict';\r\n\r\nvar xhr = require('../utils/xhr.js');\r\n\r\nvar router;\r\nvar el;\r\n\r\nmodule.exports = getRouter;\r\n\r\nfunction getRouter() {\r\n    if(!router) {\r\n        router = CreateRouter();\r\n    }\r\n\r\n    return router;\r\n}\r\n\r\nfunction CreateRouter() {\r\n    el = document.querySelector('[data-view]');\r\n\r\n    if(!el) {\r\n        throw new Error('cannot init router, because of absence of HTML hook');\r\n    }\r\n\r\n    return {\r\n        routes: [],\r\n        curRoute: '',\r\n        add: add,\r\n        check: check,\r\n        switchTo: switchTo,\r\n        listen: listen\r\n    };\r\n\r\n    function add(url, config){\r\n        if(typeof url === \"string\"){\r\n            for (var i = 0; i < this.routes.length; i++) {\r\n                if(this.routes[i].url === url) {\r\n                    console.log(\"[Router]: Route \", url, \"is already exist \");\r\n                    return this;\r\n                }\r\n            }\r\n            this.routes.push({url: url, templateUrl: config.templateUrl, views: config.views});\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    function check(route){\r\n        for (var i = 0; i < this.routes.length; i++) {\r\n            if(this.routes[i].url === route) {\r\n                return i;\r\n            }\r\n        }\r\n    }\r\n\r\n    function switchTo(newRoute){\r\n        var routeId = this.check(newRoute);\r\n        var route = this.routes[routeId];\r\n\r\n        if(route === this.routes[this.curRoute]){\r\n            return;\r\n        }\r\n\r\n        if(route){\r\n            location.hash = route.url;\r\n\r\n            xhr.get(route.templateUrl, function (response) {\r\n                if(el) {\r\n                    el.innerHTML = response;\r\n                }\r\n\r\n                route.views.forEach(function (view) {\r\n                    view.init();\r\n                });\r\n            });\r\n\r\n            this.curRoute = routeId;\r\n            console.log(\"[router]: switched to\", newRoute);\r\n\r\n            return true;\r\n        }\r\n        else{\r\n            console.log(\"[router]: such route doesn't exist: \", newRoute);\r\n            location.hash = this.routes[this.curRoute].url;\r\n            return false;\r\n        }\r\n    }\r\n\r\n    function listen(){\r\n        var self = this;\r\n\r\n        function fn(){\r\n            var match = window.location.href.match(/#(.*)$/);\r\n            var newHash = match ? match[1] : '';\r\n            newHash = newHash.toString().replace(/#/, '');\r\n\r\n            console.log(\"[router]hash changed to\", newHash);\r\n            switchTo.call(self, newHash);\r\n        }\r\n\r\n        clearInterval(self.interval);\r\n        self.interval = setInterval(fn, 50);\r\n    }\r\n}\r\n","'use strict';\r\n\r\nfunction storeFactory(factoryFunction) {\r\n    var store;\r\n\r\n    if(typeof factoryFunction !== 'function') {\r\n        throw new Error('To create store you need to send factory function');\r\n    }\r\n\r\n    store = factoryFunction();\r\n\r\n    if(typeof store !== 'object') {\r\n        throw new Error('Factory function should return object');\r\n    }\r\n\r\n    if(typeof store.update === 'function'\r\n        && typeof store.get === 'function' ) {\r\n        return store;\r\n    } else {\r\n        throw new Error('Store should have \"get\" and \"update\" methods');\r\n    }\r\n}\r\n\r\nmodule.exports = storeFactory;\r\n\r\n","'use strict';\r\n\r\nfunction View(subscribeToStore, factoryFunction) {\r\n    if(_validateStore(subscribeToStore) && typeof factoryFunction === 'function') {\r\n        let view = factoryFunction(subscribeToStore);\r\n\r\n        if(_validateView(view)) {\r\n            return view;\r\n        }\r\n\r\n    }\r\n\r\n    throw new Error('cannot create view');\r\n}\r\n\r\nfunction _validateStore(subscribeToStore) {\r\n    var subscribeToStore = typeof subscribeToStore;\r\n\r\n    return subscribeToStore === 'function';\r\n}\r\n\r\nfunction _validateView(view) {\r\n    var viewType = typeof view;\r\n\r\n    return viewType === 'object' && view.hasOwnProperty\r\n        && view.hasOwnProperty('render');\r\n}\r\n\r\nmodule.exports = View;","/*\r\nTrifon framework\r\n*/\r\n\r\nvar factory = require('./modules/main.factory.js');\r\n\r\n(function () {\r\n    var root = (typeof self === 'object' && self.self === self && self);\r\n\r\n    root.seal = factory();\r\n})(factory);","module.exports = (function(){\r\n    return {\r\n        get: get\r\n    };\r\n\r\n    function get(url, callback) {\r\n        var xhr = new XMLHttpRequest();\r\n\r\n        xhr.open('GET', url, true);\r\n        xhr.send();\r\n\r\n        xhr.onreadystatechange = function() { // (3)\r\n            if (xhr.readyState != 4) return;\r\n\r\n            if (xhr.status != 200) {\r\n                alert(xhr.status + ': ' + xhr.statusText);\r\n            } else {\r\n                callback(xhr.responseText);\r\n            }\r\n        }\r\n    }\r\n\r\n})();"]}